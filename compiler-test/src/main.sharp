mod main;

import ( std.* );

count := new atomic<int>(0);

def main() {
    for( i := 0; i < 10000; i++) {
        coroutine.builder()
            .long_term()
            = { args: object[] -> (int)
            count++;
            return 0;
        };
    }

    println("main task!");
    while(count != 10000) { delay(0); }
    println("tasks finished!");
}

