mod app;

import std.io;
import std.export;
import std.io.task;
import platform;
import platform.kernel;

chan := new channel<var>(UNLIMITED);
task_count := 64;

class a {
    num : var;
    obj : var[];
    _a : a;
}

def main(args: string[]) {
   n := new a { num = 10, _a = new a { num = 10 }, obj = {1, 2, 3} };
   println(n.num);
   println(n.obj);
   println(n._a.num);
   group := new export_group("main_group");
   group.write_object(n);
   group.export_to("class.txt");
   group.import_from("class.txt");
   n = group.read_object() as a;
   println(n.num);
   println(n.obj);
   println(n._a.num);
}
