mod app;

import (
    std.io.*,
    platform,
    platform.kernel
)

chan := new channel<var>(UNLIMITED);
const loop_count := 10000;
const slices := 10;
const n := 0;
counter := new atomic<var>{ 0 };

def main(args: string[]) {

    for(i := 0; i < slices; i++) {
        launcher = { ->
//            for(i := 0; i < 10000000; i++) {
//            }

            println("start");
            for(i := 0; i < loop_count; i++) {
                counter++;
            }
            println("done");

        };
    }

    for(i := 0; i < 10000000; i++) {
    }

    chan.read_next(0, slices * loop_count);

    println("done");

    // took 8.288s
}


class a : base c {}
class b : base c {}
class f {
    f(c) {

    }
}
class e {
    e(f) {

    }
}

foo(e) {

}

foo(a)
