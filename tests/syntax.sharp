mod app;

import std.io;
import std.io.task;

/**
*
*/

def send(str: string)
{
    send(str.get_data());
}

times := 0;
def main(args: string[]) : var {
    jb := task.builder()
        .recurring(7, milliseconds) = { args: object[] ->
            jb := args[0] as job;
            for(i := 0; i < 100000; i++) {}
            println("sent!");
        };

        task.builder()
                .recurring(10, milliseconds) = { args: object[] ->
                    jb := args[0] as job;
                    println("on");
                    for(i := 0; i < 100000; i++) {}
                    println("off");
                };
        task.builder()
                .long_term()
                .recurring(10, milliseconds) = { args: object[] ->
                    jb := args[0] as job;
                    for(i := 0; i < 100000; i++) {}
                    println("mode!");
                };



    for(;;) {
        thread.yield();
        thread.sleep(10);
    }
    return 4;
}
